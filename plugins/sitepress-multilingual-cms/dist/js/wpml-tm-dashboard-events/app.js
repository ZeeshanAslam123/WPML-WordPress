!function(t){function e(e){for(var r,o,c=e[0],i=e[1],u=e[2],f=0,p=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&p.push(s[o][0]),s[o]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);for(l&&l(e);p.length;)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],r=!0,c=1;c<n.length;c++){var i=n[c];0!==s[i]&&(r=!1)}r&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},s={27:0},a=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var c=window.webpackWPML=window.webpackWPML||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=i;a.push([1294,0]),n()}({1294:function(t,e,n){"use strict";n.r(e);var r=n(3),s=n.n(r),a=n(7),o=n.n(a),c=n(15),i=n.n(c),u=n(18),l=n.n(u),f=n(60),p=n(30),h=n.n(p),d=n(212),b=n(213),j=n(211),y=n(14),v=n(88),m=n(158),O=n(162),k=n(19),g=n.n(k),w=function(){function t(e){i()(this,t),this.jobAPI=e}var e;return l()(t,[{key:"load",value:(e=o()(s.a.mark((function t(){var e,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={scope:"remote",status:y.b.TRANSLATION_READY_TO_DOWNLOAD+","+y.b.IN_PROGRESS},t.prev=1,t.next=4,this.jobAPI.loadJobs(e);case 4:return n=t.sent,t.abrupt("return",{jobs:n.jobs,last_picked_up_date:n.last_picked_up_date?g.a.unix(n.last_picked_up_date):null});case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",{jobs:[],last_picked_up_date:null});case 11:case"end":return t.stop()}}),t,this,[[1,8]])}))),function(){return e.apply(this,arguments)})}]),t}(),T=function(){function t(e,n,r,s,a){i()(this,t),this.jobsLoader=e,this.syncJobs=n,this.downloadTranslations=r,this.batchSync=s,this.hooks=a}var e,n,r;return l()(t,[{key:"mapSyncedJobsToWpmlJobs",value:(r=o()(s.a.mark((function t(e,n){var r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.some((function(t){return void 0!==e.find((function(e){return e.id===t.id}))}))){t.next=7;break}return t.next=4,this.jobsLoader.load();case 4:r=t.sent,a=r.jobs,e=a;case 7:return t.abrupt("return",n.map((function(t){return e.find((function(e){return e.id===t.id}))})));case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"run",value:(n=o()(s.a.mark((function t(e){var n,r,a,o,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.syncJobs.sync(e);case 2:if(n=t.sent,r=n.ready,a=n.cancelled,!this.hooks){t.next=9;break}this.hooks.doAction("wpml-tm-job-translations-processed",a),t.next=14;break;case 9:return t.t0=O.a,t.next=12,this.mapSyncedJobsToWpmlJobs(e,a);case 12:t.t1=t.sent,t.t0.dispatchCancelledJobsEvent.call(t.t0,t.t1);case 14:if(t.t2=this.downloadTranslations,!this.hooks){t.next=19;break}t.t3=r,t.next=22;break;case 19:return t.next=21,this.mapSyncedJobsToWpmlJobs(e,r);case 21:t.t3=t.sent;case 22:return t.t4=t.t3,t.t5=t.t2.download.call(t.t2,t.t4),o=[t.t5],e.length>r.length+a.length&&(c=e.filter((function(t){return void 0===r.find((function(e){return Object(y.m)(t,e)}))})),o.push(this.syncBatch(c))),t.next=28,Promise.all(o);case 28:return t.abrupt("return",!0);case 29:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"syncBatch",value:(e=o()(s.a.mark((function t(e){var n,r,a,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=h()(new Set(e.map((function(t){return t.batch?t.batch.tp_id:0})).filter((function(t){return!!t}))))){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,this.batchSync.run(n);case 5:return t.next=7,this.syncJobs.sync([]);case 7:if(r=t.sent,a=r.ready,o=r.cancelled,!this.hooks){t.next=14;break}this.hooks.doAction("wpml-tm-job-translations-processed",o),t.next=19;break;case 14:return t.t0=O.a,t.next=17,this.mapSyncedJobsToWpmlJobs(e,o);case 17:t.t1=t.sent,t.t0.dispatchCancelledJobsEvent.call(t.t0,t.t1);case 19:if(t.t2=this.downloadTranslations,!this.hooks){t.next=24;break}t.t3=a,t.next=27;break;case 24:return t.next=26,this.mapSyncedJobsToWpmlJobs(e,a);case 26:t.t3=t.sent;case 27:return t.t4=t.t3,t.abrupt("return",t.t2.download.call(t.t2,t.t4));case 29:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}();(function(){function t(){i()(this,t)}return l()(t,null,[{key:"subscribeToWPMLEvents",value:function(){Object(f.b)("download-translation-proxy-jobs").then(o()(s.a.mark((function t(){var e,n,r,a,o,c,i,u;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new m.a(new v.a),n=new w(e),r=new d.a(e),a=new b.a(e,null),o=new j.a(e,1e4),c=new T(n,r,a,o,null),t.next=8,e.loadJobs({scope:"remote",status:y.b.TRANSLATION_READY_TO_DOWNLOAD+","+y.b.IN_PROGRESS});case 8:return i=t.sent,u=i.jobs,t.next=12,c.run(u);case 12:O.a.dispatchDownloadingJobsDoneEvent();case 13:case"end":return t.stop()}}),t)}))))}}]),t})().subscribeToWPMLEvents()},14:function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return h})),n.d(e,"r",(function(){return d})),n.d(e,"q",(function(){return b})),n.d(e,"h",(function(){return j})),n.d(e,"d",(function(){return y})),n.d(e,"n",(function(){return v})),n.d(e,"c",(function(){return m})),n.d(e,"f",(function(){return O})),n.d(e,"e",(function(){return k})),n.d(e,"l",(function(){return g})),n.d(e,"k",(function(){return w})),n.d(e,"o",(function(){return T})),n.d(e,"m",(function(){return E})),n.d(e,"j",(function(){return _})),n.d(e,"i",(function(){return P})),n.d(e,"p",(function(){return S})),n.d(e,"g",(function(){return D}));var r=n(51),s=n(526),a=n(527),o=n(39),c=n(113),i=n(48),u=n(131),l=n(396),f=n(202),p={CANCELLED:0,WAITING_FOR_TRANSLATOR:1,IN_PROGRESS:2,NEEDS_UPDATE:3,TRANSLATION_READY_TO_DOWNLOAD:4,COMPLETED:10,ATE_NEEDS_RETRY:40,NEEDS_REVIEW:30},h={IN_PROGRESS:2,TRANSLATED:6,DELIVERING:7,EDITED:15,CANCELLED:20,NO_CREDIT:31,HIDDEN:42},d=Object(r.a)("type","post"),b=Object(r.a)("type","package"),j=Object(s.a)([Object(r.a)("review_status","NEEDS_REVIEW"),Object(r.a)("review_status","EDITING")]),y=function(t){return!!v(t)&&(t.status===p.WAITING_FOR_TRANSLATOR||t.status===p.IN_PROGRESS)},v=function(t){return"local"===t.translation_service_id},m=function(t){return!v(t)&&(t.status===p.IN_PROGRESS||t.status===p.COMPLETED)&&t.batch.tp_id&&!t.isBatchSynced},O=function(t){return!v(t)&&(Object(o.a)("status",t)===p.TRANSLATION_READY_TO_DOWNLOAD||Object(o.a)("status",t)===p.COMPLETED)},k=function(t){return!v(t)&&Object(c.a)(Object(o.a)("status",t),[p.TRANSLATION_READY_TO_DOWNLOAD,p.COMPLETED])},g=Object(i.a)(Object(o.a)("status"),Object(c.a)(u.a,[p.WAITING_FOR_TRANSLATOR,p.IN_PROGRESS])),w=function(t){return e=t.automatic,Object(a.a)(String,e)?"0"!==e&&"false"!==e:!!e;var e},T=Object(l.a)(w),E=function(t,e){return t.id===e.id&&t.type===e.type},_=function(t,e){return void 0!==t.find((function(t){return t.status===e}))},P=function(t){return Object(f.a)(0,["extra_data","icl_translate_job_id"],t)},S=function(t){return!(!t.deadline||!g(t))&&new Date>new Date(t.deadline)},D=function(t,e){return t&&t.id===parseInt(e.translation_service_id)}},158:function(t,e,n){"use strict";n.d(e,"a",(function(){return Z}));var r=n(3),s=n.n(r),a=n(7),o=n.n(a),c=n(15),i=n.n(c),u=n(18),l=n.n(u),f="/wpml/tm/v1",p={getJobs:"".concat(f,"/jobs/"),applyTranslations:"".concat(f,"/tp/apply-translations/"),syncJobsAction:"wpml-tp-sync-job-states",syncBatchAction:"".concat(f,"/tp/batches/sync"),checkSyncBatchAction:"".concat(f,"/tp/batches/status/"),cancelJobs:"".concat(f,"/jobs/cancel/"),downloadTranslation:function(t){var e=t.id,n=t.type;return"".concat(WPML_TM_SETTINGS.restUrl).concat(f,"/tp/xliff/download/").concat(e,"/").concat(n)},assignTranslator:"".concat(f,"/jobs/assign"),cancelTranslationReviews:"".concat(f,"/jobs/translation-reviews/cancel")},h=n(61),d=n.n(h),b=n(9),j=n.n(b);var y=function(t,e){var n=new URL(t,"http://testsite.local");return function(t,e){Object.entries(t).map((function(t){var n=j()(t,2),r=n[0],s=n[1];if(!Array.isArray(s))return"object"===d()(s)?Object.entries(s).map((function(t){var n=j()(t,2),s=n[0],a=n[1];return e.set("".concat(r,"[").concat(s,"]"),a)})):e.set(r,s);s.map((function(t){return e.append("".concat(r,"[]"),t)}))}))}(e,n.searchParams),n.href.replace("http://testsite.local","")},v=n(37),m=n.n(v),O=n(44),k=n.n(O),g=n(40),w=n.n(g),T=n(0),E=n.n(T),_=n(19),P=n.n(_),S=n(55),D=n(31),A=n.n(D),R=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(t,e){return function(n){return E.a.createElement(e,null,(function(e){return E.a.createElement(t,A()({},n,e))}))}}),(function(e){return E.a.createElement(t,e)}))},x=n(13),N=n.n(x);function L(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?L(Object(n),!0).forEach((function(e){N()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w()(t);if(e){var s=w()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return k()(this,n)}}var J=E.a.createContext({}),M=(T.Component,J.Consumer);function W(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w()(t);if(e){var s=w()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return k()(this,n)}}var z=E.a.createContext({}),B=(T.Component,z.Consumer),U=n(82),G=n(14),q=function(){function t(e,n,r){i()(this,t),this.document=e,this.button=n,this.icons=r,this.progressClass="wpml-sync-and-download-translation-progress"}return l()(t,[{key:"startProcess",value:function(){this.button.classList.add(this.progressClass)}},{key:"handleResult",value:function(t){var e=this;return this.button.classList.remove(this.progressClass),Object(G.j)(t,G.b.IN_PROGRESS)||Object(G.j)(t,G.b.TRANSLATION_READY_TO_DOWNLOAD)||this.button.remove(),t.map((function(n){return e.updateIcon(n),t}))}},{key:"updateIcon",value:function(t){if(t.status===G.b.CANCELLED||t.status===G.b.COMPLETED){var e=t.status;e===G.b.CANCELLED&&t.hasCompletedTranslation&&(e=t.needsUpdate?G.b.NEEDS_UPDATE:G.b.COMPLETED);var n="#wpml-job-status-".concat(t.id," > i"),r=this.document.querySelector(n);if(r){if(this.alreadyHasCorrectIcon(r,t))return;var s=this.icons,a=s.progress,o=s.canceled,c=s.completed,i=s.needsUpdate;switch(e){case G.b.CANCELLED:r.classList.replace(a,o);break;case G.b.NEEDS_UPDATE:r.classList.replace(a,i);break;default:r.classList.replace(a,c)}r.classList.add("wpml-blink"),setTimeout((function(){r.classList.remove("wpml-blink")}),2e3)}}}},{key:"alreadyHasCorrectIcon",value:function(t,e){return t.classList.contains(this.icons.completed)&&e.status===G.b.COMPLETED||t.classList.contains(this.icons.canceled)&&e.status===G.b.CANCELLED}}]),t}();function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){N()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function F(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w()(t);if(e){var s=w()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return k()(this,n)}}var X=E.a.createContext({}),K=function(t){m()(r,t);var e,n=F(r);function r(t){var e;return i()(this,r),(e=n.call(this,t)).initialState={inProgress:!1,finished:!1,error:!1,confirmationHidden:!1,processedJobs:[]},e.state=e.initialState,e}return l()(r,[{key:"run",value:(e=o()(s.a.mark((function t(){var e,n,r=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState(Y(Y({},this.initialState),{},{inProgress:!0})),e=this.defineHooks(),t.prev=2,t.next=5,this.props.createProcess(e).run(this.props.jobs);case 5:this.setState({inProgress:!1,finished:!0}),this.updateJobsIconOnTheList(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),this.setState({inProgress:!1,finished:!1,error:t.t0});case 12:n=this.props.jobs.filter((function(t){return void 0===r.state.processedJobs.find((function(e){return Object(G.m)(t,e)}))})),this.props.setJobs(n),this.props.refreshLastPickupDate();case 15:case"end":return t.stop()}}),t,this,[[2,9]])}))),function(){return e.apply(this,arguments)})},{key:"defineHooks",value:function(){var t=this,e=Object(U.a)();return e.addAction("wpml-tm-job-translations-processed","CheckAndDownloadTranslations",(function(e){return t.setState((function(t){return{processedJobs:t.processedJobs.concat(e)}}))})),e}},{key:"updateJobsIconOnTheList",value:function(){var t=new q(document,null,WPML_TM_DASHBOARD.statusIcons);this.state.processedJobs.map((function(e){t.updateIcon(e)}))}},{key:"render",value:function(){var t=this,e=this.props.children;return E.a.createElement(X.Provider,{value:{process:Y(Y({},this.state),{},{run:function(){return t.run()},hideConfirmation:function(){return t.setState({confirmationHidden:!0})}})}},e)}}]),r}(T.Component),V=X.Consumer;R(K,M);function Q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=w()(t);if(e){var s=w()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return k()(this,n)}}R(function(t){m()(n,t);var e=Q(n);function n(){return i()(this,n),e.apply(this,arguments)}return l()(n,[{key:"render",value:function(){var t=this.props,e=t.jobs,r=t.strings,s=t.lastPickupDate,a=t.process,o=1===e.length?Object(S.sprintf)(r.numberOfTranslationStringsSingle,1):Object(S.sprintf)(r.numberOfTranslationStringsMulti,e.length),c=1===e.length?Object(S.sprintf)(r.stringsSentToTranslationSingle,"<strong>".concat(o,"</strong>")):Object(S.sprintf)(r.stringsSentToTranslationMulti,"<strong>".concat(o,"</strong>"));return E.a.createElement("div",{className:"wpml-tm-polling otgs-notice message"},E.a.createElement("p",null,E.a.createElement("span",{id:"wpml-tm-polling-jobs-number",dangerouslySetInnerHTML:{__html:c}}),E.a.createElement("input",{type:"button",className:"button button-secondary",value:r.buttonText,onClick:function(){return a.run()},disabled:n.shouldDisableTheButton(s)}),E.a.createElement("span",{id:"wpml-tmp-polling-last-pickup",className:"wpml-tm-polling-last-pickup"},Object(S.sprintf)(r.lastCheck,s?s.local().format("YYYY-MM-DD HH:mm"):r.never))))}}],[{key:"shouldDisableTheButton",value:function(t){return!(WPML_TM_DASHBOARD.debug||!t)&&t.isAfter(P()().utc().subtract(5,"minutes"))}}]),n}(E.a.Component),B,M,V);var Z=function(){function t(e){i()(this,t),this.request=e}var e,n,r;return l()(t,[{key:"synchronizeStatusesWithTP",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=new FormData;return e.append("action",p.syncJobsAction),e.append("nonce",WPML_TM_SETTINGS.syncJobStatesNonce),t&&e.append("update_last_picked_up",1),fetch(ajaxurl,{method:"POST",body:e}).then((function(t){if(!t.ok)throw new Error("Status synchronization has failed.");return t.json()})).then((function(t){return t.data}))}},{key:"loadJobs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=y(p.getJobs,t);return this.request.get(e)}},{key:"applyTranslation",value:function(t){var e=t.map((function(t){return{id:t.id,type:t.type}}));return this.request.post(p.applyTranslations,e)}},{key:"cancelJobs",value:function(t){var e=t.map((function(t){return{id:t.id,type:t.type}}));return this.request.post(p.cancelJobs,e)}},{key:"syncBatch",value:(r=o()(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={batchId:e},t.abrupt("return",this.request.post(p.syncBatchAction,n));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"checkBatchSync",value:(n=o()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.get(p.checkSyncBatchAction));case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"applyTranslationToElement",value:function(t,e){return this.request.post(p.applyTranslations,{original_element_id:t,element_type:e})}},{key:"assignTranslator",value:function(t,e){var n={jobId:"string"===t.type?t.id:t.extra_data.icl_translate_job_id,type:t.type,translatorId:e};return this.request.post(p.assignTranslator,n)}},{key:"downloadXLIFF",value:(e=o()(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.request.download(p.downloadTranslation(e)));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}()},162:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(15),s=n.n(r),a=n(18),o=n.n(a),c=n(60),i=function(){function t(){s()(this,t)}return o()(t,null,[{key:"dispatchCancelledJobsEvent",value:function(t){Object(c.a)("tp-jobs-cancelled",{cancelledJobs:t})}},{key:"dispatchDownloadedJobsEvent",value:function(t){Object(c.a)("tp-jobs-downloaded",{downloadedJobs:t})}},{key:"dispatchDownloadingJobsDoneEvent",value:function(){Object(c.a)("tp-jobs-downloading-done")}}]),t}()},211:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n(3),s=n.n(r),a=n(7),o=n.n(a),c=n(15),i=n.n(c),u=n(18),l=n.n(u),f=n(127),p=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e4;i()(this,t),this.jobAPI=e,this.interval=n,this.MAX_ATTEMPTS=5}var e,n,r;return l()(t,[{key:"run",value:(r=o()(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.jobAPI.syncBatch(e);case 2:return t.abrupt("return",this.checkProgress());case 3:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"checkProgress",value:(n=o()(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.attempts=0;case 1:return t.next=3,this.runCheck();case 3:if(t.sent){t.next=7;break}t.next=1;break;case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"runCheck",value:(e=o()(s.a.mark((function t(){var e=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(f.a)(o()(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.jobAPI.checkBatchSync();case 2:return n=t.sent,t.abrupt("return",0===n.length||++e.attempts>=e.MAX_ATTEMPTS);case 4:case"end":return t.stop()}}),t)}))),this.interval));case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}()},212:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n(3),s=n.n(r),a=n(7),o=n.n(a),c=n(15),i=n.n(c),u=n(18),l=n.n(u),f=n(13),p=n.n(f),h=n(14);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){p()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var j=function(t,e,n){var r=function(t){return e.find((function(e){return t.id===e.id&&t.type===e.type&&e.status===n}))},s=t.filter((function(t){return t.status===n||void 0!==r(t)})).map((function(t){var e=r(t);return void 0!==e&&(t.hasCompletedTranslation=e.hasCompletedTranslation,t.needsUpdate=e.needsUpdate),t})).map((function(t){return b(b({},t),{},{status:n})})),a=e.filter((function(e){return e.status===n&&void 0===t.find((function(t){return Object(h.m)(t,e)}))}));return s.concat(a)},y=function(){function t(e){i()(this,t),this.jobAPI=e}var e;return l()(t,[{key:"sync",value:(e=o()(s.a.mark((function t(e){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.jobAPI.synchronizeStatusesWithTP(!0);case 2:return n=t.sent,t.abrupt("return",{ready:j(e,n,h.b.TRANSLATION_READY_TO_DOWNLOAD),cancelled:j(e,n,h.b.CANCELLED)});case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}()},213:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var r=n(13),s=n.n(r),a=n(3),o=n.n(a),c=n(30),i=n.n(c),u=n(7),l=n.n(u),f=n(15),p=n.n(f),h=n(18),d=n.n(h),b=n(14),j=n(162);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){s()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var m=function(){function t(e,n){p()(this,t),this.LIMIT_PER_CHUNK=5,this.REQUEST_NUM_LIMIT=5,this.jobAPI=e,this.hooks=n}var e,n;return d()(t,[{key:"download",value:(n=l()(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(this.allJobsCount=e.length,this.alreadyProcessedJobs=0,this.jobsToProcess=i()(e),n=[];this.jobsToProcess.length&&n.length<this.REQUEST_NUM_LIMIT;)r=this.getNextJobsSet(),n.push(this.downloadSubset(r));return t.next=7,Promise.all(n);case 7:return j.a.dispatchDownloadedJobsEvent(e),t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"downloadSubset",value:(e=l()(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.jobAPI.applyTranslation(e);case 2:if(e=e.map((function(t){return v(v({},t),{},{status:b.b.COMPLETED})})),this.alreadyProcessedJobs+=e.length,this.hooks&&this.hooks.doAction("wpml-tm-job-translations-processed",e),!(this.jobsToProcess.length>0)){t.next=7;break}return t.abrupt("return",this.downloadSubset(this.getNextJobsSet()));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"getNextJobsSet",value:function(){var t=this.jobsToProcess.slice(0,this.LIMIT_PER_CHUNK);return this.jobsToProcess.splice(0,this.LIMIT_PER_CHUNK),t}}]),t}(),O=function(){function t(e,n){p()(this,t),this.jobAPI=e,this.hooks=n}var e;return d()(t,[{key:"download",value:(e=l()(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new m(this.jobAPI,this.hooks),t.abrupt("return",n.download(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})}]),t}()},589:function(t,e,n){var r={"./af":229,"./af.js":229,"./ar":230,"./ar-dz":231,"./ar-dz.js":231,"./ar-kw":232,"./ar-kw.js":232,"./ar-ly":233,"./ar-ly.js":233,"./ar-ma":234,"./ar-ma.js":234,"./ar-sa":235,"./ar-sa.js":235,"./ar-tn":236,"./ar-tn.js":236,"./ar.js":230,"./az":237,"./az.js":237,"./be":238,"./be.js":238,"./bg":239,"./bg.js":239,"./bm":240,"./bm.js":240,"./bn":241,"./bn-bd":242,"./bn-bd.js":242,"./bn.js":241,"./bo":243,"./bo.js":243,"./br":244,"./br.js":244,"./bs":245,"./bs.js":245,"./ca":246,"./ca.js":246,"./cs":247,"./cs.js":247,"./cv":248,"./cv.js":248,"./cy":249,"./cy.js":249,"./da":250,"./da.js":250,"./de":251,"./de-at":252,"./de-at.js":252,"./de-ch":253,"./de-ch.js":253,"./de.js":251,"./dv":254,"./dv.js":254,"./el":255,"./el.js":255,"./en-au":256,"./en-au.js":256,"./en-ca":257,"./en-ca.js":257,"./en-gb":258,"./en-gb.js":258,"./en-ie":259,"./en-ie.js":259,"./en-il":260,"./en-il.js":260,"./en-in":261,"./en-in.js":261,"./en-nz":262,"./en-nz.js":262,"./en-sg":263,"./en-sg.js":263,"./eo":264,"./eo.js":264,"./es":265,"./es-do":266,"./es-do.js":266,"./es-mx":267,"./es-mx.js":267,"./es-us":268,"./es-us.js":268,"./es.js":265,"./et":269,"./et.js":269,"./eu":270,"./eu.js":270,"./fa":271,"./fa.js":271,"./fi":272,"./fi.js":272,"./fil":273,"./fil.js":273,"./fo":274,"./fo.js":274,"./fr":275,"./fr-ca":276,"./fr-ca.js":276,"./fr-ch":277,"./fr-ch.js":277,"./fr.js":275,"./fy":278,"./fy.js":278,"./ga":279,"./ga.js":279,"./gd":280,"./gd.js":280,"./gl":281,"./gl.js":281,"./gom-deva":282,"./gom-deva.js":282,"./gom-latn":283,"./gom-latn.js":283,"./gu":284,"./gu.js":284,"./he":285,"./he.js":285,"./hi":286,"./hi.js":286,"./hr":287,"./hr.js":287,"./hu":288,"./hu.js":288,"./hy-am":289,"./hy-am.js":289,"./id":290,"./id.js":290,"./is":291,"./is.js":291,"./it":292,"./it-ch":293,"./it-ch.js":293,"./it.js":292,"./ja":294,"./ja.js":294,"./jv":295,"./jv.js":295,"./ka":296,"./ka.js":296,"./kk":297,"./kk.js":297,"./km":298,"./km.js":298,"./kn":299,"./kn.js":299,"./ko":300,"./ko.js":300,"./ku":301,"./ku.js":301,"./ky":302,"./ky.js":302,"./lb":303,"./lb.js":303,"./lo":304,"./lo.js":304,"./lt":305,"./lt.js":305,"./lv":306,"./lv.js":306,"./me":307,"./me.js":307,"./mi":308,"./mi.js":308,"./mk":309,"./mk.js":309,"./ml":310,"./ml.js":310,"./mn":311,"./mn.js":311,"./mr":312,"./mr.js":312,"./ms":313,"./ms-my":314,"./ms-my.js":314,"./ms.js":313,"./mt":315,"./mt.js":315,"./my":316,"./my.js":316,"./nb":317,"./nb.js":317,"./ne":318,"./ne.js":318,"./nl":319,"./nl-be":320,"./nl-be.js":320,"./nl.js":319,"./nn":321,"./nn.js":321,"./oc-lnc":322,"./oc-lnc.js":322,"./pa-in":323,"./pa-in.js":323,"./pl":324,"./pl.js":324,"./pt":325,"./pt-br":326,"./pt-br.js":326,"./pt.js":325,"./ro":327,"./ro.js":327,"./ru":328,"./ru.js":328,"./sd":329,"./sd.js":329,"./se":330,"./se.js":330,"./si":331,"./si.js":331,"./sk":332,"./sk.js":332,"./sl":333,"./sl.js":333,"./sq":334,"./sq.js":334,"./sr":335,"./sr-cyrl":336,"./sr-cyrl.js":336,"./sr.js":335,"./ss":337,"./ss.js":337,"./sv":338,"./sv.js":338,"./sw":339,"./sw.js":339,"./ta":340,"./ta.js":340,"./te":341,"./te.js":341,"./tet":342,"./tet.js":342,"./tg":343,"./tg.js":343,"./th":344,"./th.js":344,"./tk":345,"./tk.js":345,"./tl-ph":346,"./tl-ph.js":346,"./tlh":347,"./tlh.js":347,"./tr":348,"./tr.js":348,"./tzl":349,"./tzl.js":349,"./tzm":350,"./tzm-latn":351,"./tzm-latn.js":351,"./tzm.js":350,"./ug-cn":352,"./ug-cn.js":352,"./uk":353,"./uk.js":353,"./ur":354,"./ur.js":354,"./uz":355,"./uz-latn":356,"./uz-latn.js":356,"./uz.js":355,"./vi":357,"./vi.js":357,"./x-pseudo":358,"./x-pseudo.js":358,"./yo":359,"./yo.js":359,"./zh-cn":360,"./zh-cn.js":360,"./zh-hk":361,"./zh-hk.js":361,"./zh-mo":362,"./zh-mo.js":362,"./zh-tw":363,"./zh-tw.js":363};function s(t){var e=a(t);return n(e)}function a(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}s.keys=function(){return Object.keys(r)},s.resolve=a,t.exports=s,s.id=589},79:function(t,e,n){"use strict";var r=n(15),s=n.n(r),a=function t(e){s()(this,t),this.ID=e.ID,this.caps=e.caps,this.roles=e.roles,this.user_email=e.data,this.user_login=e.data.user_email,this.user_nicename=e.data.user_login};e.a=function t(){s()(this,t),this.restUrl=WPML_TM_SETTINGS.restUrl,this.restNonce=WPML_TM_SETTINGS.restNonce,this.ateSettings=WPML_TM_SETTINGS.ate,this.currentUser=new a(WPML_TM_SETTINGS.currentUser)}},88:function(t,e,n){"use strict";var r=n(3),s=n.n(r),a=n(7),o=n.n(a),c=n(15),i=n.n(c),u=n(18),l=n.n(u),f=n(37),p=n.n(f),h=n(44),d=n.n(h),b=n(40),j=n.n(b),y=n(79),v=n(82);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=j()(t);if(e){var s=j()(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return d()(this,n)}}Object(v.a)();var O=function(t){p()(r,t);var e,n=m(r);function r(){return i()(this,r),n.apply(this,arguments)}return l()(r,[{key:"get",value:function(t){return this.request(t,"GET")}},{key:"post",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.request(t,"POST",e)}},{key:"download",value:(e=o()(s.a.mark((function t(e){var n=this;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(e,this.generateArgs("GET")).then((function(t){return t.ok?t.blob():n.buildError(t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"request",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.generateArgs(e,n);return this.restUrl.includes("?")&&(t=t.replace("?","&")),this.handleRequest(this.restUrl+t,r)}},{key:"handleRequest",value:function(t,e){var n=this;return fetch(t,e).then((function(t){return t.ok?t.json():n.buildError(t)}))}},{key:"generateArgs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n={method:t.toUpperCase(),headers:{Accept:"application/json","Content-Type":"application/json","X-WP-Nonce":this.restNonce},credentials:"same-origin"};return"GET"!==n.method&&e&&(n.body="string"==typeof e?e:JSON.stringify(e)),n}},{key:"buildError",value:function(t){return t.json().then((function(e){var n=new Error(e.message||t.statusText);return Promise.reject(Object.assign(n,{response:t}))}))}}]),r}(y.a);e.a=O}});