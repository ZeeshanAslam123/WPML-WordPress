var WPML_core=WPML_core||{};WPML_core.languageSwitcher=function(r,o){"use strict";var n,a,t,i,s,l="wpml-ls-inline-styles-additional-css",p="wpml-ls-inline-styles-dialog",c=[".js-wpml-ls-setting-display_flags",".js-wpml-ls-setting-display_names_in_native_lang",".js-wpml-ls-setting-display_names_in_current_lang"],e=function(){f(),m(),u(),w(),W(),M(),P(),z(),X(),Y(),V(),tt(),T(),D(),A(),Q(),g()},d=function(){var t;r("#"+l).length<1&&((t=r("<style>")).attr("id",l),t.appendTo(r("head")))},f=function(){t.on("change",".js-wpml-ls-trigger-save",function(){et(r(this))}),t.on("keyup",".js-wpml-ls-trigger-need-save",function(){var t=r(this).closest(".js-wpml-ls-option").find(".js-wpml-ls-messages");it(t,o.strings.leave_text_box_to_save,0,"notice")})},u=function(){t.on("click",".js-wpml-ls-toggle-suboptions",function(){const t=r(this),e=r(t.data("target"));var s=!!t.data("show-on-value")&&""+t.val()==""+t.data("show-on-value"),l=!!t.data("show-on-checked")&&t.prop("checked");s||l?e.slideDown():e.slideUp()})},m=function(){t.on("click",".js-wpml-ls-toggle-slot",function(){var t=r(this),e=r(t.data("target"));e.slideToggle({complete:function(){e.is(":visible")?(t.addClass("open"),e.find(".js-wpml-ls-row-edit").trigger("click")):t.removeClass("open"),x()}})}).on("click",".js-wpml-ls-toggle-once",function(){var t=r(this).nextAll(".js-wpml-ls-toggle-target");return r(this).find("label").unwrap().find(".js-arrow-toggle").remove(),t.slideToggle(),!1})},w=function(){t.on("click.tooltip",".js-wpml-ls-tooltip-open",function(t){t.preventDefault(),H(r(this))})},g=function(e){c.forEach(function(t){(t=e?r(t,e):r(t)).length&&t.on("change",lt)})},h=function(){r("#wpml-ls-languages-order").sortable({stop:function(){et(r(this))}})},v=function(){a.dialog({dialogClass:"dialog-fixed otgs-ui-dialog wpml-ls-dialog",width:"90%",modal:!0,autoOpen:!1,draggable:!0,resizable:!1}).on("dialogopen",function(){r("body").css("overflow","hidden"),r(".js-wpml-ls-active-tooltip").pointer("close"),x(),C()}).on("dialogclose",function(){r("body").css("overflow",""),r(".js-wpml-ls-active-tooltip").pointer("close"),ot()}),r(window).resize(k)},j=function(){var t,s,l=b();l&&(t=r("#wpml-language-switcher-"+l.type),s=y(l),r("html, body").animate({scrollTop:t.offset().top},1,function(){var t,e;s?e=s.find(".js-wpml-ls-subform"):(t=r("#wpml-ls-new-"+l.type+"-template"),e=K(t),i=l.slug),O(e)}))},b=function(){var t=WPML_core.sanitize(window.location.hash).substring(1).split("/"),e=null,s=t[0]||"",t=t[1]||"";return 0<=r.inArray(s,["menus","sidebars","statics"])&&(e={type:s,slug:t},parent.location.hash=""),e},y=function(t){var e="[data-item-type="+t.type+"]",t=t.slug?"[data-item-slug="+t.slug+"]":"",t=r("tr"+e+t);return 1===t.length?t:null},k=_.debounce(function(){x(),C()},200),x=function(){var t=r(window).height()-180;a.dialog("option","maxHeight",t),a.dialog("option","position",{my:"center",at:"center",of:window})},C=function(){var t=a.find(".js-wpml-ls-preview-wrapper"),e=900<a.width();t.height()+200<a.height()||e&&t.height()<a.height()?a.on("scroll.preview",function(){a.find(".js-wpml-ls-preview-wrapper").css({position:"relative",top:a.scrollTop()})}):a.off("scroll.preview").find(".js-wpml-ls-preview-wrapper").css({position:"relative",top:0})},L=function(t){(t=t||n).find(".js-wpml-ls-colorpicker").wpColorPicker({change:function(t){t=r(t.target).parents(".js-wpml-ls-subform");Z(t)},clear:function(t){t=r(t.target).parents(".js-wpml-ls-subform");Z(t)}}),t.find(".js-wpml-ls-colorpicker-wrapper").each(function(){const t=r(this),e=t.find(".wp-color-result");if(e.length){const n=t.closest("tr"),i=n.find('td[id^="color_label_"]');var s,l=t.closest("td").index();const o=n.closest("table").find("tr").first(),a=o.find("th").eq(l-1);i.length&&a.length&&(s=i.text().trim(),l=a.text().trim(),e.attr("aria-label",`${s}, ${l}`))}})},W=function(){r(".js-wpml-ls-dialog-close").on("click",function(t){t.preventDefault(),E(),a.dialog("close")}),r(".js-wpml-ls-dialog-save").on("click",function(t){t.preventDefault(),r(this).prop("disabled",!0);t=a.find(".js-wpml-ls-subform");I(t)}),r(".js-wpml-ls-open-dialog").on("click",function(t){t.preventDefault();var t=r(r(t.target).data("target")),t=t.hasClass("js-wpml-ls-template")?K(t):t.find(".js-wpml-ls-subform");g(t),O(t)})},M=function(){r(".js-wpml-ls-slot-list").on("click",".js-wpml-ls-row-edit",function(t){t.preventDefault();t=r(r(t.target).parents("tr.js-wpml-ls-row")).find(".js-wpml-ls-subform");O(t)}).on("click",".js-wpml-ls-row-remove",function(t){var e,s;t.preventDefault(),confirm(o.strings.confirmation_item_remove)&&(e=r(this).parents("tr.js-wpml-ls-row"),s=e.data("item-type"),e.find(".js-wpml-ls-subform input, .js-wpml-ls-subform select").remove(),et(e,function(){e.fadeOut(800,function(){e.remove(),S(s)})}))})},P=function(){t.on("change",".js-wpml-ls-available-slots",function(){var t=WPML_core.sanitize(r(this).val()),e=r(this).closest(".js-wpml-ls-subform"),s=e.data("item-type");r(this).removeClass("wpml-ls-required"),N(t,s)&&J(e,t)})},z=function(){t.on("change",".js-wpml-ls-colorpicker-preset",function(){var s,t=WPML_core.sanitize(r(this).val()),e=r(this).parents(".js-wpml-ls-subform");t&&(s=r(this).parents(".js-wpml-ls-panel-colors"),t=o.color_schemes[t].values,r.each(t,function(t,e){t=s.find(".js-wpml-ls-color-"+t);t.val(e),t.parents(".wp-picker-container").find(".wp-color-result").css("background-color",e)}),Z(e))})},T=function(){t.on("change","select",function(){var t=WPML_core.sanitize(r(this).val());r("option",this).prop("selected",!1),r("option",this).attr("selected",!1),r('option[value="'+t+'"]',this).prop("selected",!0),r('option[value="'+t+'"]',this).attr("selected","selected")})},D=function(){var t=r("#wpml-ls-refresh-on-browser-back-button");"yes"===t.val()?location.reload(!0):t.val("yes")},A=function(){n.submit(function(t){t.preventDefault(),n.find('input[name="submit_setup_wizard"]').val(1),et(n,function(){location.href=WPML_core.sanitize(location.href).replace(/#.*/,"")})})},Q=function(){r(".js-wpml-ls-preview").on("click",function(t){t.preventDefault()})},H=function(t){var e=t.data("content"),s=t.data("link-text"),l=t.data("link-url"),n=t.data("link-target");0<s.length&&(e+='<br><br><a href="'+(l=0===l.length?"#":l)+'" '+('target="'+n+'"')+">",e+=s,e+="</a>"),r(".js-wpml-ls-active-tooltip").pointer("close"),t.length&&e&&(t.addClass("js-wpml-ls-active-tooltip"),t.pointer({pointerClass:"js-wpml-ls-tooltip wpml-ls-tooltip",content:e,position:{edge:"bottom",align:"left"},show:function(t,e){e.pointer.css("marginLeft","-54px")},close:function(t,e){e.pointer.css("marginLeft","0")},buttons:function(t,e){return r('<a class="close" href="#">&nbsp;</a>').on("click.pointer",function(t){t.preventDefault(),e.element.pointer("close")})}}).pointer("open"))},O=function(t){var e,s=t.clone(!0);a.find(".js-wpml-ls-dialog-inner").empty().append(s),""===s.find(".js-wpml-ls-preview").html()&&Z(s),q(t),R(s),(e=s).find(".js-wpml-ls-colorpicker").each(function(){var t=r(this).clone();r(this).parents(".js-wpml-ls-colorpicker-wrapper").empty().html(t)}),L(e),t=s,i&&(e='.js-wpml-ls-available-slots option[value="'+i+'"]',t.find(e).prop("selected",!0),t.find(e).attr("selected","selected"),i=null),a.dialog("option","title",s.data("title")).dialog("open")},q=function(t){var e=t.data("item-type"),t=t.data("item-slug"),t=r("#wpml-ls-inline-styles-"+e+"-"+(t="%id%"===t?"__id__":t));s=t.detach(),ot(s.clone())},E=function(){s instanceof jQuery&&0<s.length&&r("#"+l).before(s)},I=function(t){var e,s=t.clone(!0),l=t.data("item-type");s.find(".js-wpml-ls-preview-wrapper").css("top",0),0<=r.inArray(l,["menus","sidebars"])?(e=t.find(".js-wpml-ls-available-slots").val(),N(e,l)?((void 0===s.data("origin-id")?U:B)(s),S(l)):F(t)):"statics"===s.data("item-type")&&$(s)},S=function(t){var e=r("#wpml-language-switcher-"+t),s=e.find(".js-wpml-ls-row").length,t=r.map(o[t],function(t,e){return e}).length;0===s?e.find(".js-wpml-ls-slot-list").fadeOut():e.find(".js-wpml-ls-slot-list").fadeIn(),s===t?e.find("button.js-wpml-ls-open-dialog").attr("disabled","disabled").siblings(".js-wpml-ls-tooltip-wrapper").removeClass("hidden"):e.find("button.js-wpml-ls-open-dialog").prop("disabled",!1).siblings(".js-wpml-ls-tooltip-wrapper").addClass("hidden")},$=function(t){var e=r("#"+t.data("origin-id")),s=t.data("item-slug");e.find(".js-wpml-ls-subform").replaceWith(t),at("statics",s),et(e,function(){a.find(".js-wpml-ls-dialog-inner").empty(),a.dialog("close")})},B=function(t){var e=r("#"+t.data("origin-id")),s=t.data("item-type"),l=WPML_core.sanitize(t.find(".js-wpml-ls-available-slots").val());e.find(".js-wpml-ls-subform").replaceWith(t),e.attr("id")!=="wpml-ls-"+s+"-row-"+l&&G(e,s,l),at(s,l),et(e,function(){a.find(".js-wpml-ls-dialog-inner").empty(),a.dialog("close")})},U=function(t){var e=t.data("item-type"),s=WPML_core.sanitize(t.find(".js-wpml-ls-available-"+e).val());J(t,s);var l=r.trim(r("#wpml-ls-new-"+e+"-row-template").html()),l=r(r.parseHTML(l));l.find(".js-wpml-ls-subform").replaceWith(t),G(l,e,s),l.hide().appendTo(n.find("#wpml-ls-slot-list-"+e+" > tbody")).show(800),at(e,s),et(l,function(){a.find(".js-wpml-ls-dialog-inner").empty(),a.dialog("close")})},F=function(t){const e=t.find(".js-wpml-ls-available-slots");e.addClass("wpml-ls-required");const s=r("<div/>",{class:"ant-alert ant-alert-error",role:"alert","data-show":"true"});var l=r("<i/>",{class:"ant-alert-icon otgs-ico otgs-ico-warning-o"});const n=r("<div/>",{class:"ant-alert-content"});var i=r("<div/>",{class:"ant-alert-message",text:e.hasClass("js-wpml-ls-available-menus")?o.strings.menu_option_not_chosen:o.strings.widget_option_not_chosen}),t=r("<div/>",{class:"ant-alert-description"});n.append(i,t),s.append(l,n),e.after(s),a.animate({scrollTop:0},300),r(".js-wpml-ls-dialog-save").prop("disabled",!1)},G=function(t,e,s){var l="wpml-ls-"+e+"-row-"+s,n=o[e][s].name;t.attr("id",l),t.data("item-type",e),t.find(".js-wpml-ls-subform").addBack().data("item-slug",s),t.find(".js-wpml-ls-subform").data("origin-id",l),t.find(".js-wpml-ls-row-title").html(n)},J=function(t,s){var l="",n=t.data("item-type"),i=t.data("item-slug");t.find("input, select").each(function(t,e){"string"==typeof(l=r(e).attr("name"))&&r(e).attr("name",l.replace(n+"["+i+"]",n+"["+s+"]")),"string"==typeof(l=r(e).attr("id"))&&r(e).attr("id",l.replace(i,s))}),t.find("label").each(function(t,e){"string"==typeof(l=r(e).attr("for"))&&r(e).attr("for",l.replace(i,s))})},K=function(t){t=r.trim(t.html()),t=r(r.parseHTML(t));return R(t),t},N=function(t,e){var s=r.map(o[e],function(t){return"menus"===e?t.term_id.toString():t.id});return 0<=r.inArray(t,s)},R=function(t){var e,s=t.data("item-type"),l=(e=[],r("#wpml-ls-slot-list-"+s+" .js-wpml-ls-row").each(function(){e.push(r(this).data("item-slug"))}),e),n=t.data("item-slug");t.find(".js-wpml-ls-available-slots option").each(function(){var t=r(this),e=0<=r.inArray(t.val(),l),s=t.val();t.prop("disabled",e&&n!==s)})},V=function(){t.on("change",'[type!="text"].js-wpml-ls-trigger-update',function(){var t=r(this).parents(".js-wpml-ls-subform");Z(t)}).on("keyup",'[type="text"].js-wpml-ls-trigger-update',function(){var t=r(this).parents(".js-wpml-ls-subform");Z(t)}).on("keyup",".js-wpml-ls-additional-css",function(){var t="wpml-ls-inline-styles-additional-css",e=r('<style id="'+t+'" type="text/css">'+WPML_core.sanitize(r(this).val())+"</style>");r("#"+t).replaceWith(e)})},X=function(){t.on("change",".js-wpml-ls-template-selector",function(){var t=r(this).val(),s=r(this).closest(".js-wpml-ls-subform"),t=o.templates[t].force_settings;s.find(".js-wpml-ls-to-include input").prop("disabled",!1),jQuery.each(t,function(t,e){(1===e?s.find(".js-wpml-ls-setting-"+t).prop("checked",!0):s.find(".js-wpml-ls-setting-"+t).prop("checked",!1)).prop("disabled",!0)})})},Y=function(){t.on("change",".js-wpml-ls-menu-is-hierarchical",function(){var t=parseInt(r(this).val()),e=r(this).closest(".js-wpml-ls-subform").find(".js-wpml-ls-setting-display_link_for_current_lang");e.prop("disabled",!1),1===t&&e.prop("checked",!0).prop("disabled",!0)})},Z=_.debounce(function(t){r(".js-wpml-ls-dialog-save").prop("disabled",!0);var e=t.find(".js-wpml-ls-preview");0<e.length&&(nt(e),t=st(t),wp.ajax.send({data:{action:"wpml-ls-update-preview",nonce:o.nonce,slot_settings:t},success:function(t){e.empty(),ot(t.styles),rt(t.css),pt(t.js),it(e,t.html)},error:function(t){it(e,t,0,"error")}}))},500),tt=function(){n.on("click",".js-wpml-ls-save-settings",function(t){t.preventDefault(),et(r(this))})},et=_.debounce(function(t,e){var s=t.closest(".js-wpml-ls-option").find(".js-wpml-ls-messages"),l=st(n);(s=0===s.length?t.closest(".js-wpml-ls-section").find(".js-wpml-ls-messages"):s).empty(),nt(s),wp.ajax.send({data:{action:"wpml-ls-save-settings",nonce:o.nonce,settings:l},success:function(t){it(s,t,2500,"updated"),"function"==typeof e&&e()},error:function(t){it(s,t,2500,"error")}})},500),st=function(t){var e=t.find(":input:disabled").prop("disabled",!1),t=t.find("input, select, textarea").serialize();return e.attr("disabled","disabled"),t},lt=function(){var e=r(this),s=[e];c.forEach(function(t){t=e.closest("li").siblings("li").find(t);0<t.length&&s.push(t)});var t=s.filter(function(t){return t.is(":checked")});1===t.length?t[0].prop("disabled",!0):1<t.length&&s.forEach(function(t){t.prop("disabled",!1)})},nt=function(t){r(".js-wpml-ls-messages").removeClass("success error").hide().empty(),t.siblings(".spinner").addClass("is-active")},it=function(t,e,s,l){t.siblings(".spinner").removeClass("is-active"),t.removeClass("updated notice error"),l&&t.addClass(l),t.html(e).fadeIn(),s&&t.delay(s).fadeOut(),r(".js-wpml-ls-dialog-save").prop("disabled",!1)},ot=function(t){r("#"+p).remove(),t&&((t=t instanceof jQuery?t:r(r.parseHTML(t)).first()).attr("id",p),r("#"+l).before(t))},at=function(t,e){var s=r("#"+p).clone(),t="wpml-ls-inline-styles-"+t+"-"+e,e=r("#"+t);s.attr("id",t),e.length?e.replaceWith(s):r("#"+l).before(s)},rt=function(t){var e,s;if(null!=t)for(e=0;e<t.length;e++)0===(s=r('link[href="'+t[e]+'"]')).length&&((s=r("<link>")).attr("rel","stylesheet"),s.attr("type","text/css"),s.attr("media","all"),s.attr("href",t[e]),s.prependTo("head"))},pt=function(t){var e,s;if(null!=t)for(e=0;e<t.length;e++)0===(s=r('script[src="'+t[e]+'"]')).length&&((s=r("<script><\/script>")).attr("type","text/javascript"),s.attr("src",t[e]),s.prependTo("head"))};return{init:function(){n=r("#wpml-ls-settings-form"),a=r("#wpml-ls-dialog"),t=n.add(a),d(),v(),L(),h(),e(),j(),r(document).trigger("wpml_ls_admin_loaded")}}}(jQuery,wpml_language_switcher_admin),jQuery(function(){"use strict";WPML_core.languageSwitcher.init()});
//# sourceMappingURL=language-switchers-settings.min.js.map
