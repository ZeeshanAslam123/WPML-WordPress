!function(i){window.llms=window.llms||{},window.llms.widgets=function(){return this.$widgets=i(".llms-widget"),this.$info_toggles=i(".llms-widget-info-toggle"),this.init=function(){this.bind()},this.bind=function(){this.$info_toggles.on("mouseenter mouseleave",function(e){i(this).closest(".llms-widget").toggleClass("info-showing","mouseenter"===e.type)})},this.init(),this};new window.llms.widgets;var e=i(".wp-header-end");e.length||(e=i(".wrap h1, .wrap h2").first()),i("#lifterlms-notifications").insertAfter(e),i(document).ready(function(){i(document).on("click",".lifterlms-notice-button.notice-dismiss",function(){var t=i(this).val(),e=i(this).data("nonce");i.ajax({type:"POST",data:{action:"lifterlms_hide_notice",notification_id:t,nonce:e},url:ajaxurl,success:function(e){i("#"+t).hide()}})})}),i.fn.llmsPostsSelect2=function(e){var l=e;this.each(function(){var t=i(this),n=l||{},e={multiple:!1,placeholder:t.attr("data-placeholder")||(void 0!==LLMS.l10n?LLMS.l10n.translate("Select a Course/Membership"):"Select a Course/Membership"),post_type:t.attr("data-post-type")||"post",post_statuses:t.attr("data-post-statuses")||"publish",instructor_id:null,allow_clear:t.attr("data-post-type")||!1,width:null};i.each(e,function(e){t.attr("data-"+e)&&(n[e]=t.attr("data-"+e))}),"multiple"===t.attr("multiple")&&(n.multiple=!0),n=i.extend(e,n),i(this).llmsSelect2({allowClear:n.allow_clear,ajax:{dataType:"JSON",delay:250,method:"POST",url:window.ajaxurl,data:function(e){return{action:"select2_query_posts",page:e.page?e.page-1:0,post_type:n.post_type,instructor_id:n.instructor_id,post_statuses:n.post_statuses,term:e.term,_ajax_nonce:window.llms.ajax_nonce}},processResults:function(e,t){return{results:function t(e){return Array.isArray(e)?i.map(e,function(e){return{text:e.name,id:e.id}}):i.map(e,function(e){return{text:e.label,children:t(e.items)}})}(e.items),pagination:{more:e.more}}}},cache:!0,placeholder:n.placeholder,multiple:n.multiple,width:n.width})})},i("select.llms-posts-select2").llmsPostsSelect2(),i.fn.llmsStudentsSelect2=function(t){var n,e;return this.length&&(n=this,t=t||{},e={allow_clear:!1,enrolled_in:"",multiple:!1,not_enrolled_in:"",placeholder:void 0!==LLMS.l10n?LLMS.l10n.translate("Select a student"):"Select a student",roles:"",width:"100%"},i.each(e,function(e){n.attr("data-"+e)&&(t[e]=n.attr("data-"+e))}),t=i.extend(e,t),this.llmsSelect2({allowClear:t.allow_clear,ajax:{dataType:"JSON",delay:250,method:"GET",url:window.wpApiSettings.root+"wp/v2/users",data:function(e){return{_wpnonce:window.wpApiSettings.nonce,context:"edit",page:e.page||1,per_page:10,not_enrolled_in:e.not_enrolled_in||t.not_enrolled_in,enrolled_in:e.enrolled_in||t.enrolled_in,roles:e.roles||t.roles,search:e.term,search_columns:"email,name,username"}},processResults:function(e,t){var t=t.page||1,n=this._request.getResponseHeader("X-WP-TotalPages");return{results:i.map(e,function(e){return{text:e.name+" <"+e.email+">",id:e.id}}),pagination:{more:t<n}}}},cache:!0,placeholder:t.placeholder,multiple:t.multiple,width:t.width})),this},window.llms.emailConnectors={registerClient:function(e,t){var l=document.createElement("form");l.setAttribute("method","POST"),l.setAttribute("action",e),i.each(t,function(e,t){var n;e=e,t=t,(n=document.createElement("input")).setAttribute("type","hidden"),n.setAttribute("name",e),n.setAttribute("value",t),l.appendChild(n)}),document.body.appendChild(l),l.submit()},remoteInstall:function(t,e,n){const l=this;t.parent().find(".llms-error").remove(),i.post(ajaxurl,e,function(){e.action=e.action+"_verify",i.post(ajaxurl,e,n).fail(function(e){l.handleRemoteInstallFailure(t,e)})}).fail(function(e){l.handleRemoteInstallFailure(t,e)})},handleRemoteInstallFailure:function(e,t){LLMS.Spinner.stop(e);t=t.responseJSON&&t.responseJSON.message?t.responseJSON.message:t.responseText;t&&i('<p class="llms-error">'+LLMS.l10n.replace("Error: %s",{"%s":t})+"</p>").insertAfter(e)}}}(jQuery);
//# sourceMappingURL=../maps/js/llms-admin.min.js.map
